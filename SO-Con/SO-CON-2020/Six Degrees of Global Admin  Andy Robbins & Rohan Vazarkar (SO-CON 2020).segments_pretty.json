{
  "segments": [
    {
      "Time_Start": 0.0,
      "Time_End": 15.92,
      "Text": "This text was transcribed using whisper model: large-v2\n\n Hi there, my name is Andy Robbins."
    },
    {
      "Time_Start": 15.92,
      "Time_End": 21.48,
      "Text": " The title of this talk is Six Degrees of Global Admin."
    },
    {
      "Time_Start": 21.48,
      "Time_End": 29.48,
      "Text": " So along with Rohan Vazirkar and Will Schroeder, I'm one of the co-creators of Bloodhound."
    },
    {
      "Time_Start": 29.48,
      "Time_End": 36.480000000000004,
      "Text": " And along with Rohan Vazirkar and Ryan Hausknecht, I'm one of the co-authors on Bloodhound 4.0."
    },
    {
      "Time_Start": 36.480000000000004,
      "Time_End": 41.120000000000005,
      "Text": " So we are going to look at Bloodhound 4.0 in this talk, but along the way there, we're"
    },
    {
      "Time_Start": 41.120000000000005,
      "Time_End": 42.28,
      "Text": " going to do a couple things first."
    },
    {
      "Time_Start": 42.28,
      "Time_End": 46.04,
      "Text": " We're going to acknowledge some prior work."
    },
    {
      "Time_Start": 46.04,
      "Time_End": 51.72,
      "Text": " We're going to do a quick refresher on Azure in case you're not familiar with the architecture"
    },
    {
      "Time_Start": 51.72,
      "Time_End": 54.24,
      "Text": " and the inner workings of Azure."
    },
    {
      "Time_Start": 54.24,
      "Time_End": 60.36,
      "Text": " We're going to look at the new data collector for Bloodhound 4.0 called Azure Hound."
    },
    {
      "Time_Start": 60.36,
      "Time_End": 66.24000000000001,
      "Text": " And then I want to show off one of my favorite things about this release, which is the totally"
    },
    {
      "Time_Start": 66.24000000000001,
      "Time_End": 70.5,
      "Text": " refreshed GUI for Bloodhound."
    },
    {
      "Time_Start": 70.5,
      "Time_End": 72.96000000000001,
      "Text": " So we'll take a look at that."
    },
    {
      "Time_Start": 72.96000000000001,
      "Time_End": 77.56,
      "Text": " And then at the end, we're going to take a look at an example attack path based on what"
    },
    {
      "Time_Start": 77.56,
      "Time_End": 80.68,
      "Text": " we have seen in real Azure tenants."
    },
    {
      "Time_Start": 80.68,
      "Time_End": 81.68,
      "Text": " So first things first."
    },
    {
      "Time_Start": 81.68,
      "Time_End": 88.04,
      "Text": " Let's take a look at some of the prior work that came before this release of Bloodhound."
    },
    {
      "Time_Start": 88.04,
      "Time_End": 93.48,
      "Text": " First and most importantly is the work by Leron Gray at Microsoft's Azure Red team."
    },
    {
      "Time_Start": 93.48,
      "Time_End": 100.44000000000001,
      "Text": " Leron has put a tool together called StormSpotter, which is also a graph-based tool that identifies"
    },
    {
      "Time_Start": 100.44000000000001,
      "Time_End": 104.48,
      "Text": " connections between principles and objects within Azure."
    },
    {
      "Time_Start": 104.48,
      "Time_End": 107.92000000000002,
      "Text": " So make sure you go check out Leron's work."
    },
    {
      "Time_Start": 107.92,
      "Time_End": 113.52,
      "Text": " And then on the offensive security side, there's been a lot of work from these folks, Sean"
    },
    {
      "Time_Start": 113.52,
      "Time_End": 117.72,
      "Text": " Metcalf at Trimark Security, Carl Fawson at NetSpy."
    },
    {
      "Time_Start": 117.72,
      "Time_End": 124.24000000000001,
      "Text": " From Specter Ops, Will Schroeder and Lee Christensen have done a lot of work on research into offensive"
    },
    {
      "Time_Start": 124.24000000000001,
      "Time_End": 125.8,
      "Text": " security in Azure."
    },
    {
      "Time_Start": 125.8,
      "Time_End": 134.28,
      "Text": " Jake Carnes and Ryan Gangerd at NetSpy, Dirk-Yama Lemma at Fox IT, and Tal Mayor at Microsoft."
    },
    {
      "Time_Start": 134.28,
      "Time_End": 138.2,
      "Text": " These folks' work and Twitter links and all that kind of stuff will be in the description"
    },
    {
      "Time_Start": 138.2,
      "Time_End": 140.16,
      "Text": " of this video below."
    },
    {
      "Time_Start": 140.16,
      "Time_End": 146.4,
      "Text": " And then on the defensive side, or maybe more like the more operational side of Azure, some"
    },
    {
      "Time_Start": 146.4,
      "Time_End": 149.84,
      "Text": " people have put out a lot of really great work, including Michael Niehaus, formerly"
    },
    {
      "Time_Start": 149.84,
      "Time_End": 155.72,
      "Text": " at Microsoft, now at Tanium, Oliver Kieselbach, Jos Lieben, and Eli Shlomo."
    },
    {
      "Time_Start": 155.72,
      "Time_End": 162.22,
      "Text": " And again, links to their work will be down below, and I sincerely apologize if I butchered"
    },
    {
      "Time_Start": 162.22,
      "Time_End": 163.72,
      "Text": " one of your names."
    },
    {
      "Time_Start": 163.72,
      "Time_End": 169.64,
      "Text": " So I want to give kind of a refresher on Azure, what kind of objects there are, what the relations"
    },
    {
      "Time_Start": 169.64,
      "Time_End": 176.96,
      "Text": " are between those, what the hierarchy of a tenant is, what a tenant is, and give some"
    },
    {
      "Time_Start": 176.96,
      "Time_End": 183.4,
      "Text": " analogies, in case you're more familiar, like I was on the Active Directory side, what some"
    },
    {
      "Time_Start": 183.4,
      "Time_End": 190.24,
      "Text": " of the concepts in Azure can be considered to be analogous to when coming from an Active"
    },
    {
      "Time_Start": 190.24,
      "Time_End": 191.24,
      "Text": " Directory background."
    },
    {
      "Time_Start": 191.76000000000002,
      "Time_End": 194.24,
      "Text": " So the first thing I want to talk about is the tenant itself."
    },
    {
      "Time_Start": 194.24,
      "Time_End": 198.04000000000002,
      "Text": " So at the very top level, you have a tenant."
    },
    {
      "Time_Start": 198.04000000000002,
      "Time_End": 206.52,
      "Text": " The tenant is analogous from an Active Directory perspective to a domain, in that a tenant"
    },
    {
      "Time_Start": 206.52,
      "Time_End": 213.76000000000002,
      "Text": " is used to handle user identities, security group memberships, and all that good stuff."
    },
    {
      "Time_Start": 213.76000000000002,
      "Time_End": 220.48000000000002,
      "Text": " It's also analogous to the domain head object, in that if you have control at the tenant"
    },
    {
      "Time_Start": 220.48000000000002,
      "Time_End": 227.04000000000002,
      "Text": " level, you control everything else descendant under that tenant."
    },
    {
      "Time_Start": 227.04000000000002,
      "Time_End": 231.60000000000002,
      "Text": " There's a caveat to that when we talk about subscriptions, but there's an easy way around"
    },
    {
      "Time_Start": 231.60000000000002,
      "Time_End": 233.68,
      "Text": " that as well."
    },
    {
      "Time_Start": 233.68,
      "Time_End": 242.04000000000002,
      "Text": " So right under the tenant, you're going to have users, and if you're syncing on-prem"
    },
    {
      "Time_Start": 242.04000000000002,
      "Time_End": 246.92000000000002,
      "Text": " users up into the tenant, you're going to see on-prem users here as well."
    },
    {
      "Time_Start": 246.92000000000002,
      "Time_End": 251.52,
      "Text": " You have security groups and distribution groups, so we're just constraining ourselves"
    },
    {
      "Time_Start": 251.52,
      "Time_End": 253.96,
      "Text": " to security groups here."
    },
    {
      "Time_Start": 253.96,
      "Time_End": 260.28000000000003,
      "Text": " You have service principles, which we're going to talk about a lot later, apps, which again"
    },
    {
      "Time_Start": 260.28000000000003,
      "Time_End": 264.12,
      "Text": " we'll talk about later, and devices."
    },
    {
      "Time_Start": 264.12,
      "Time_End": 270.0,
      "Text": " And so these relationships that we're looking at here, the tenant, we can say that the tenant"
    },
    {
      "Time_Start": 270.0,
      "Time_End": 276.76,
      "Text": " contains the users, the security groups, service principles, and apps that are registered within"
    },
    {
      "Time_Start": 276.76,
      "Time_End": 278.08,
      "Text": " that tenant."
    },
    {
      "Time_Start": 278.08,
      "Time_End": 284.32,
      "Text": " Devices, they're not really contained by a tenant, but there is a trust relationship"
    },
    {
      "Time_Start": 284.32,
      "Time_End": 290.28,
      "Text": " between the device and the tenant, so the device trusts the tenant or is, so to say,"
    },
    {
      "Time_Start": 290.28,
      "Time_End": 292.56,
      "Text": " joined to the tenant."
    },
    {
      "Time_Start": 292.56,
      "Time_End": 299.88,
      "Text": " And you can think of that as being somewhat analogous to a vanilla computer Active Directory"
    },
    {
      "Time_Start": 299.88,
      "Time_End": 301.96,
      "Text": " join relationship."
    },
    {
      "Time_Start": 301.96,
      "Time_End": 308.2,
      "Text": " What you can also have, so to say, under a tenant is a subscription."
    },
    {
      "Time_Start": 308.2,
      "Time_End": 314.2,
      "Text": " Now the actual relationship here, again, is not that the tenant contains the subscription,"
    },
    {
      "Time_Start": 314.2,
      "Time_End": 319.44,
      "Text": " but the subscription trusts the tenant, so there's a trust relationship there."
    },
    {
      "Time_Start": 319.44,
      "Time_End": 325.76,
      "Text": " Within a subscription, you can have resource groups, and under resource groups, you have"
    },
    {
      "Time_Start": 325.76,
      "Time_End": 327.4,
      "Text": " resources."
    },
    {
      "Time_Start": 327.4,
      "Time_End": 330.71999999999997,
      "Text": " So a good example of a resource is a virtual machine."
    },
    {
      "Time_Start": 330.72,
      "Time_End": 334.40000000000003,
      "Text": " Now optionally, instead of a subscription being directly under a tenant, you can actually"
    },
    {
      "Time_Start": 334.40000000000003,
      "Time_End": 339.6,
      "Text": " have subscriptions organized into what are called management groups."
    },
    {
      "Time_Start": 339.6,
      "Time_End": 345.52000000000004,
      "Text": " Management groups themselves fall under a root management group, so this is an optional"
    },
    {
      "Time_Start": 345.52000000000004,
      "Time_End": 349.28000000000003,
      "Text": " hierarchy that you might be able to see is at the very top, you have the tenant, then"
    },
    {
      "Time_Start": 349.28000000000003,
      "Time_End": 355.28000000000003,
      "Text": " you have the root management group, then the management group, then a subscription, and"
    },
    {
      "Time_Start": 355.28000000000003,
      "Time_End": 359.56,
      "Text": " then a resource group, and then finally the actual resource, and in this example, we're"
    },
    {
      "Time_Start": 359.56,
      "Time_End": 364.48,
      "Text": " saying this virtual machine is our resource."
    },
    {
      "Time_Start": 364.48,
      "Time_End": 369.44,
      "Text": " So once you have some time invested into a tenant, and you have lots of resources, you"
    },
    {
      "Time_Start": 369.44,
      "Time_End": 375.68,
      "Text": " have lots of resource groups, that can start to feel kind of unwieldy from the administrative"
    },
    {
      "Time_Start": 375.68,
      "Time_End": 382.0,
      "Text": " side, but when you start to look at it from this graph perspective, it becomes abundantly"
    },
    {
      "Time_Start": 382.0,
      "Time_End": 390.36,
      "Text": " clear what the actual hierarchy is of the tenant, and of the resources within the subscriptions"
    },
    {
      "Time_Start": 390.36,
      "Time_End": 391.88,
      "Text": " that trust that tenant."
    },
    {
      "Time_Start": 391.88,
      "Time_End": 398.6,
      "Text": " So earlier I mentioned that there's this caveat with this hierarchical relationship, and that"
    },
    {
      "Time_Start": 398.6,
      "Time_End": 403.48,
      "Text": " caveat is that by default, if you're a global admin, and you have control at the tenant"
    },
    {
      "Time_Start": 403.48,
      "Time_End": 410.24,
      "Text": " level, you actually don't automatically have control of everything that you saw within"
    },
    {
      "Time_Start": 410.24,
      "Time_End": 412.16,
      "Text": " that hierarchy."
    },
    {
      "Time_Start": 412.16,
      "Time_End": 417.36,
      "Text": " So if we pull up that hierarchy again, at the very top level, you have that Azure tenant."
    },
    {
      "Time_Start": 417.36,
      "Time_End": 421.92,
      "Text": " Now privileges in Azure inherit down to descendant objects."
    },
    {
      "Time_Start": 421.92,
      "Time_End": 424.62,
      "Text": " There's actually no way to turn that off."
    },
    {
      "Time_Start": 424.62,
      "Time_End": 428.92,
      "Text": " So you would think that if you have control at the tenant level, you have control of the"
    },
    {
      "Time_Start": 428.92,
      "Time_End": 433.3,
      "Text": " root management group, the management group, the sub, the resource group, and every resource"
    },
    {
      "Time_Start": 433.3,
      "Time_End": 435.84000000000003,
      "Text": " at the very bottom row."
    },
    {
      "Time_Start": 435.84000000000003,
      "Time_End": 437.64,
      "Text": " By default, that's not true."
    },
    {
      "Time_Start": 437.64,
      "Time_End": 443.52,
      "Text": " By default, there's this barrier at the subscription level so that the subscription doesn't automatically"
    },
    {
      "Time_Start": 443.52,
      "Time_End": 449.71999999999997,
      "Text": " grant global admins control of everything within that subscription, but there is an"
    },
    {
      "Time_Start": 449.71999999999997,
      "Time_End": 454.2,
      "Text": " easy bypass, or maybe bypass isn't the right word."
    },
    {
      "Time_Start": 454.2,
      "Time_End": 459.76,
      "Text": " There's an easy configuration change within Azure that if you go to the tenant within"
    },
    {
      "Time_Start": 459.76,
      "Time_End": 465.12,
      "Text": " the Azure portal and click on properties, and then scroll down here to where this says"
    },
    {
      "Time_Start": 465.12,
      "Time_End": 468.32,
      "Text": " access management for Azure resources."
    },
    {
      "Time_Start": 468.32,
      "Time_End": 473.2,
      "Text": " So what this says here is that the administrator user can manage access to all Azure subscriptions"
    },
    {
      "Time_Start": 473.2,
      "Time_End": 475.48,
      "Text": " and management groups in this tenant."
    },
    {
      "Time_Start": 475.48,
      "Time_End": 478.7,
      "Text": " And by default, that's no."
    },
    {
      "Time_Start": 478.7,
      "Time_End": 483.16,
      "Text": " So you change that to yes and save that configuration."
    },
    {
      "Time_Start": 483.16,
      "Time_End": 488.36,
      "Text": " And now you have control of everything at the subscription level."
    },
    {
      "Time_Start": 488.36,
      "Time_End": 491.12,
      "Text": " You have control of everything at the resource group level."
    },
    {
      "Time_Start": 491.12,
      "Time_End": 492.68,
      "Text": " You have control of every resource."
    },
    {
      "Time_Start": 492.96,
      "Time_End": 498.16,
      "Text": " So you have control of everything within that hierarchy, which means that that hierarchy"
    },
    {
      "Time_Start": 498.16,
      "Time_End": 501.6,
      "Text": " is valid from a graph perspective."
    },
    {
      "Time_Start": 501.6,
      "Time_End": 508.8,
      "Text": " So we can create edges from, for example, a tenant to a subscription to a resource group."
    },
    {
      "Time_Start": 508.8,
      "Time_End": 515.24,
      "Text": " And even though by default, the principles that have control of the tenant level would"
    },
    {
      "Time_Start": 515.24,
      "Time_End": 522.12,
      "Text": " not have control at the resource level, but by default, they can give themselves that"
    },
    {
      "Time_Start": 522.12,
      "Time_End": 525.36,
      "Text": " privilege very, very easily."
    },
    {
      "Time_Start": 525.36,
      "Time_End": 529.4,
      "Text": " So it is still a valid attack path, so to say."
    },
    {
      "Time_Start": 529.4,
      "Time_End": 534.32,
      "Text": " So we are going to look at new attack primitives that are tracked in Bloodhound 4.0 now specific"
    },
    {
      "Time_Start": 534.32,
      "Time_End": 535.32,
      "Text": " to Azure."
    },
    {
      "Time_Start": 535.32,
      "Time_End": 541.4,
      "Text": " But before we do that, I want to make a point about roles in Azure."
    },
    {
      "Time_Start": 541.4,
      "Time_End": 549.54,
      "Text": " So it's very tempting, or it can be very tempting, to think of a role as being strictly"
    },
    {
      "Time_Start": 549.54,
      "Time_End": 554.8,
      "Text": " analogous to a security group in Active Directory."
    },
    {
      "Time_Start": 554.8,
      "Time_End": 560.64,
      "Text": " So for example, the title of this talk is Six Degrees of Global Admin, which is a callback"
    },
    {
      "Time_Start": 560.64,
      "Time_End": 565.38,
      "Text": " to our talk from 2016 when we first introduced Bloodhound, and that talk was called Six Degrees"
    },
    {
      "Time_Start": 565.38,
      "Time_End": 567.72,
      "Text": " of Domain Admin."
    },
    {
      "Time_Start": 567.72,
      "Time_End": 575.1600000000001,
      "Text": " So in Active Directory, you can add a user to the domain admins group, and then they"
    },
    {
      "Time_Start": 575.1600000000001,
      "Time_End": 580.62,
      "Text": " get privileges because the domain admins group is listed as the identity reference on security"
    },
    {
      "Time_Start": 580.62,
      "Time_End": 583.88,
      "Text": " descriptors on other objects."
    },
    {
      "Time_Start": 583.88,
      "Time_End": 587.94,
      "Text": " In Azure, it doesn't work exactly that way."
    },
    {
      "Time_Start": 587.94,
      "Time_End": 593.6800000000001,
      "Text": " And so the point that I really want to drive at is that it can be very tempting to think"
    },
    {
      "Time_Start": 593.6800000000001,
      "Time_End": 600.1800000000001,
      "Text": " of a role as being a group, but a role is not a group."
    },
    {
      "Time_Start": 600.1800000000001,
      "Time_End": 602.6800000000001,
      "Text": " Global admin, best example I can think of."
    },
    {
      "Time_Start": 602.6800000000001,
      "Time_End": 611.0400000000001,
      "Text": " So if you grant somebody global admin, or put a more accurate way, if you activate the"
    },
    {
      "Time_Start": 611.0400000000001,
      "Time_End": 619.6600000000001,
      "Text": " global admin role for a particular user, you're not adding that user to the global admin group."
    },
    {
      "Time_Start": 619.66,
      "Time_End": 624.7199999999999,
      "Text": " It might even be inaccurate to say that you're adding them to the global admins."
    },
    {
      "Time_Start": 624.7199999999999,
      "Time_End": 629.0799999999999,
      "Text": " You're activating a role for that particular user."
    },
    {
      "Time_Start": 629.0799999999999,
      "Time_End": 632.6,
      "Text": " So that kind of begs the question, what exactly is a role?"
    },
    {
      "Time_Start": 632.6,
      "Time_End": 635.04,
      "Text": " Well, we can look at the documentation to help us out there."
    },
    {
      "Time_Start": 635.04,
      "Time_End": 642.0799999999999,
      "Text": " So if we pull up the official Microsoft documentation, and we look at what Microsoft themselves say,"
    },
    {
      "Time_Start": 642.08,
      "Time_End": 649.7,
      "Text": " you can see what they say is that a role definition is a collection of permissions."
    },
    {
      "Time_Start": 649.7,
      "Time_End": 654.82,
      "Text": " And they go on to say that it's typically just called a role."
    },
    {
      "Time_Start": 654.82,
      "Time_End": 657.5400000000001,
      "Text": " But we also have role definitions at the tenant level."
    },
    {
      "Time_Start": 657.5400000000001,
      "Time_End": 659.26,
      "Text": " Global admin is a good example."
    },
    {
      "Time_Start": 659.26,
      "Time_End": 666.0200000000001,
      "Text": " But I want to highlight roles that are more specific to a particular abuse, being the"
    },
    {
      "Time_Start": 666.0200000000001,
      "Time_End": 669.3000000000001,
      "Text": " ability to reset another user's password."
    },
    {
      "Time_Start": 669.3000000000001,
      "Time_End": 671.96,
      "Text": " So one of those roles is the password administrator role."
    },
    {
      "Time_Start": 671.96,
      "Time_End": 677.48,
      "Text": " And if we look at the definition of that role from Microsoft's documentation, this says"
    },
    {
      "Time_Start": 677.48,
      "Time_End": 685.36,
      "Text": " password administrators can reset passwords of other users who are non-administrators"
    },
    {
      "Time_Start": 685.36,
      "Time_End": 695.4000000000001,
      "Text": " or members of the following roles only, directory readers, guest inviter, and password administrator."
    },
    {
      "Time_Start": 695.4,
      "Time_End": 699.74,
      "Text": " So to me, this reads a little bit confusingly."
    },
    {
      "Time_Start": 699.74,
      "Time_End": 700.74,
      "Text": " But don't worry."
    },
    {
      "Time_Start": 700.74,
      "Time_End": 701.78,
      "Text": " It gets worse."
    },
    {
      "Time_Start": 701.78,
      "Time_End": 706.78,
      "Text": " If we look at a different role that also has the password reset ability, let's look at"
    },
    {
      "Time_Start": 706.78,
      "Time_End": 710.1,
      "Text": " the helpdesk administrator role."
    },
    {
      "Time_Start": 710.1,
      "Time_End": 715.34,
      "Text": " What this says is that helpdesk administrators can reset passwords and invalidate refresh"
    },
    {
      "Time_Start": 715.34,
      "Time_End": 721.66,
      "Text": " tokens of other users who are, again, here's this phrase, non-administrators, or who are"
    },
    {
      "Time_Start": 721.66,
      "Time_End": 726.92,
      "Text": " assigned the following roles only, directory readers, guest inviter, helpdesk admin, message"
    },
    {
      "Time_Start": 726.92,
      "Time_End": 730.6999999999999,
      "Text": " center reader, password admin, and reports reader."
    },
    {
      "Time_Start": 730.6999999999999,
      "Time_End": 734.92,
      "Text": " So for me, this is a little bit confusing to read."
    },
    {
      "Time_Start": 734.92,
      "Time_End": 738.64,
      "Text": " And I think you could be forgiven for not totally understanding what the limitations"
    },
    {
      "Time_Start": 738.64,
      "Time_End": 744.9599999999999,
      "Text": " of any of these given roles are or what the kind of greater implication of this is."
    },
    {
      "Time_Start": 744.9599999999999,
      "Time_End": 751.56,
      "Text": " That greater implication is that Microsoft has done a fantastic job at isolating users"
    },
    {
      "Time_Start": 751.5600000000001,
      "Time_End": 755.7800000000001,
      "Text": " who have very highly privileged roles activated for themselves."
    },
    {
      "Time_Start": 755.7800000000001,
      "Time_End": 761.5400000000001,
      "Text": " For example, when you read this, it says helpdesk admins can reset passwords for users who have"
    },
    {
      "Time_Start": 761.5400000000001,
      "Time_End": 764.3000000000001,
      "Text": " one of these roles or who are a non-admin."
    },
    {
      "Time_Start": 764.3000000000001,
      "Time_End": 769.4200000000001,
      "Text": " A non-admin, we'll just say, is somebody who doesn't have an admin role activated."
    },
    {
      "Time_Start": 769.4200000000001,
      "Time_End": 773.48,
      "Text": " What you don't see here is global admin."
    },
    {
      "Time_Start": 773.48,
      "Time_End": 776.3800000000001,
      "Text": " So a helpdesk admin can reset passwords for people with these roles."
    },
    {
      "Time_Start": 776.3800000000001,
      "Time_End": 778.5400000000001,
      "Text": " They can't reset a password for a global admin."
    },
    {
      "Time_Start": 778.54,
      "Time_End": 781.5999999999999,
      "Text": " In fact, there's only two roles that can do that."
    },
    {
      "Time_Start": 781.5999999999999,
      "Time_End": 784.5999999999999,
      "Text": " So I don't know about you, but I'm a more visual person."
    },
    {
      "Time_Start": 784.5999999999999,
      "Time_End": 792.76,
      "Text": " So to really fully understand the complete list of relationships between users who have"
    },
    {
      "Time_Start": 792.76,
      "Time_End": 797.78,
      "Text": " one kind of role versus users that have another kind of role, we went through an exercise"
    },
    {
      "Time_Start": 797.78,
      "Time_End": 801.9599999999999,
      "Text": " of just brute forcing our way through every combination that we could think of based on"
    },
    {
      "Time_Start": 801.9599999999999,
      "Time_End": 806.3199999999999,
      "Text": " the documentation, based on the role names within the Azure tenant, and based on other"
    },
    {
      "Time_Start": 806.32,
      "Time_End": 811.5,
      "Text": " things that crop up with discovering that, hey, this role can reset a password as well."
    },
    {
      "Time_Start": 811.5,
      "Time_End": 816.1800000000001,
      "Text": " And so the end result of that is we have this nice little table that we can pretty clearly"
    },
    {
      "Time_Start": 816.1800000000001,
      "Time_End": 822.4200000000001,
      "Text": " understand if somebody has a role active in column A, can they reset a password for somebody"
    },
    {
      "Time_Start": 822.4200000000001,
      "Time_End": 826.1,
      "Text": " with a role activated in row two?"
    },
    {
      "Time_Start": 826.1,
      "Time_End": 829.86,
      "Text": " Now don't worry too much about totally understanding this right now."
    },
    {
      "Time_Start": 829.86,
      "Time_End": 833.34,
      "Text": " The Azure Hound data collector does all this logic for you."
    },
    {
      "Time_Start": 833.36,
      "Time_End": 837.88,
      "Text": " And the resulting attack paths that you see in the Bloodhound GUI will respect all of"
    },
    {
      "Time_Start": 837.88,
      "Time_End": 839.6800000000001,
      "Text": " these rules automatically."
    },
    {
      "Time_Start": 839.6800000000001,
      "Time_End": 846.9200000000001,
      "Text": " Okay, so let's talk about what the new nodes are that are tracked in Bloodhound now that"
    },
    {
      "Time_Start": 846.9200000000001,
      "Time_End": 848.9200000000001,
      "Text": " are specific to Azure."
    },
    {
      "Time_Start": 848.9200000000001,
      "Time_End": 851.4,
      "Text": " And those are going to fall into two major categories."
    },
    {
      "Time_Start": 851.4,
      "Time_End": 858.36,
      "Text": " One is Azure Active Directory, and the other is Azure Resource Manager."
    },
    {
      "Time_Start": 858.36,
      "Time_End": 864.62,
      "Text": " So up in Azure Active Directory, we've got devices, tenants, security groups, users,"
    },
    {
      "Time_Start": 864.62,
      "Time_End": 867.02,
      "Text": " service principles, and apps."
    },
    {
      "Time_Start": 867.02,
      "Time_End": 876.62,
      "Text": " And within Resource Manager, we have management groups, subscriptions, key vaults, and VMs."
    },
    {
      "Time_Start": 876.62,
      "Time_End": 882.74,
      "Text": " So let's go through these one by one, and we'll talk about what the object is, what"
    },
    {
      "Time_Start": 882.74,
      "Time_End": 888.26,
      "Text": " the abuse possibility is, what role is needed to do that abuse, and what tooling you can"
    },
    {
      "Time_Start": 888.26,
      "Time_End": 892.0,
      "Text": " use to do the abuse."
    },
    {
      "Time_Start": 892.0,
      "Time_End": 893.8,
      "Text": " So first of all is a tenant."
    },
    {
      "Time_Start": 893.8,
      "Time_End": 897.84,
      "Text": " So an Azure tenant, recall earlier we were saying an Azure tenant is kind of analogous"
    },
    {
      "Time_Start": 897.84,
      "Time_End": 901.3199999999999,
      "Text": " to an Active Directory domain."
    },
    {
      "Time_Start": 901.3199999999999,
      "Time_End": 905.34,
      "Text": " There's a lot of different ways that you can abuse control of a tenant."
    },
    {
      "Time_Start": 905.34,
      "Time_End": 910.76,
      "Text": " First of all, just directly against the tenant itself, you can install persistence."
    },
    {
      "Time_Start": 910.76,
      "Time_End": 913.64,
      "Text": " You can register malicious apps."
    },
    {
      "Time_Start": 913.64,
      "Time_End": 918.54,
      "Text": " And then because control of the tenant means control of everything else, what you can also"
    },
    {
      "Time_Start": 918.54,
      "Time_End": 921.54,
      "Text": " do is you can reset user passwords."
    },
    {
      "Time_Start": 921.54,
      "Time_End": 923.1,
      "Text": " You can add people to security groups."
    },
    {
      "Time_Start": 923.1,
      "Time_End": 928.84,
      "Text": " You can do any of the other abuses against any of the descendant objects because of the"
    },
    {
      "Time_Start": 928.84,
      "Time_End": 932.04,
      "Text": " nature of descendant privileges."
    },
    {
      "Time_Start": 932.04,
      "Time_End": 936.9,
      "Text": " So the two different roles that you would need to abuse control of the tenant itself,"
    },
    {
      "Time_Start": 936.9,
      "Time_End": 940.54,
      "Text": " one would be global admin, and the other is privileged role admin."
    },
    {
      "Time_Start": 940.54,
      "Time_End": 946.54,
      "Text": " So privileged role admin is a very interesting one because privileged role admin is not global"
    },
    {
      "Time_Start": 946.54,
      "Time_End": 952.5,
      "Text": " admin, but it can promote other people to global admin, or it can promote itself to"
    },
    {
      "Time_Start": 952.5,
      "Time_End": 953.5,
      "Text": " global admin."
    },
    {
      "Time_Start": 953.5,
      "Time_End": 955.0999999999999,
      "Text": " So it's just as good."
    },
    {
      "Time_Start": 955.0999999999999,
      "Time_End": 960.1999999999999,
      "Text": " So you can take advantage of this with a couple of different PowerShell cmdlets."
    },
    {
      "Time_Start": 960.1999999999999,
      "Time_End": 961.78,
      "Text": " One would be create Azure backdoor."
    },
    {
      "Time_Start": 961.78,
      "Time_End": 964.02,
      "Text": " This is a PowerAzure cmdlet."
    },
    {
      "Time_Start": 964.02,
      "Time_End": 967.74,
      "Text": " You can also use add Azure AD directory role member."
    },
    {
      "Time_Start": 967.74,
      "Time_End": 969.76,
      "Text": " This is a Microsoft cmdlet."
    },
    {
      "Time_Start": 969.76,
      "Time_End": 971.4,
      "Text": " Add Azure AD user password."
    },
    {
      "Time_Start": 971.4,
      "Time_End": 972.64,
      "Text": " That's another Microsoft cmdlet."
    },
    {
      "Time_Start": 972.64,
      "Time_End": 976.36,
      "Text": " You'll see a theme start to present itself is a lot of the abuses here you can actually"
    },
    {
      "Time_Start": 976.36,
      "Time_End": 983.36,
      "Text": " just do with the built-in Microsoft cmdlets from the Azure modules."
    },
    {
      "Time_Start": 983.36,
      "Time_End": 987.48,
      "Text": " So the next object is an AZ group, so this is an Azure security group."
    },
    {
      "Time_Start": 987.48,
      "Time_End": 988.48,
      "Text": " The abuse here is pretty simple."
    },
    {
      "Time_Start": 988.48,
      "Time_End": 992.48,
      "Text": " It's the exact same as a security group in vanilla AD is you just add yourself to the"
    },
    {
      "Time_Start": 992.48,
      "Time_End": 998.08,
      "Text": " group and you take advantage of whatever privileges that group already has."
    },
    {
      "Time_Start": 998.08,
      "Time_End": 1001.12,
      "Text": " So two roles in particular that can abuse this."
    },
    {
      "Time_Start": 1001.12,
      "Time_End": 1005.6800000000001,
      "Text": " One is Intune administrator, which might be a surprise, but that role actually gives you"
    },
    {
      "Time_Start": 1005.6800000000001,
      "Time_End": 1008.44,
      "Text": " the ability to add users to groups."
    },
    {
      "Time_Start": 1008.44,
      "Time_End": 1012.6800000000001,
      "Text": " And the other, a little more obviously, is the groups administrator role."
    },
    {
      "Time_Start": 1012.6800000000001,
      "Time_End": 1019.84,
      "Text": " Alternatively, groups, security groups in Azure can also have owners, and owners on"
    },
    {
      "Time_Start": 1019.84,
      "Time_End": 1024.88,
      "Text": " security groups can also add users to that group."
    },
    {
      "Time_Start": 1024.88,
      "Time_End": 1026.44,
      "Text": " So a couple different ways you can abuse this."
    },
    {
      "Time_Start": 1026.44,
      "Time_End": 1031.76,
      "Text": " You can just use the Azure web portal to do this, or you could use the Microsoft cmdlet"
    },
    {
      "Time_Start": 1031.76,
      "Time_End": 1034.3600000000001,
      "Text": " add Azure AD group member."
    },
    {
      "Time_Start": 1034.3600000000001,
      "Time_End": 1035.3600000000001,
      "Text": " Easy."
    },
    {
      "Time_Start": 1035.3600000000001,
      "Time_End": 1038.3200000000002,
      "Text": " The next object is AZ user."
    },
    {
      "Time_Start": 1038.3200000000002,
      "Time_End": 1040.88,
      "Text": " So this is an Azure user."
    },
    {
      "Time_Start": 1040.88,
      "Time_End": 1046.3600000000001,
      "Text": " So the abuse here is pretty simple, is you can reset that user's password and then abuse"
    },
    {
      "Time_Start": 1046.3600000000001,
      "Time_End": 1050.8400000000001,
      "Text": " whatever privileges that user already had after authenticating as that user."
    },
    {
      "Time_Start": 1050.8400000000001,
      "Time_End": 1055.44,
      "Text": " There's a bunch of different combinations of roles that will let you abuse this."
    },
    {
      "Time_Start": 1055.44,
      "Time_End": 1060.3200000000002,
      "Text": " Again, the Azure hound data collector does all this logic for you, so you don't need"
    },
    {
      "Time_Start": 1060.3200000000002,
      "Time_End": 1062.72,
      "Text": " to worry about keeping track of all this stuff."
    },
    {
      "Time_Start": 1062.72,
      "Time_End": 1066.52,
      "Text": " The attack paths that you see, they will be valid."
    },
    {
      "Time_Start": 1066.52,
      "Time_End": 1070.0800000000002,
      "Text": " You can very easily abuse this with the Azure web portal, or you can abuse it with the Microsoft"
    },
    {
      "Time_Start": 1070.0800000000002,
      "Time_End": 1074.04,
      "Text": " cmdlet set Azure AD user password."
    },
    {
      "Time_Start": 1074.04,
      "Time_End": 1076.96,
      "Text": " So next is an Azure security principle."
    },
    {
      "Time_Start": 1076.96,
      "Time_End": 1082.2,
      "Text": " The abuse here is that you can create a new secret for the service principle, or the shorthand"
    },
    {
      "Time_Start": 1082.2,
      "Time_End": 1085.1200000000001,
      "Text": " for that being an SP."
    },
    {
      "Time_Start": 1085.1200000000001,
      "Time_End": 1090.8400000000001,
      "Text": " Then authenticate as that SP and abuse whatever privileges were already held by the SP."
    },
    {
      "Time_Start": 1090.8400000000001,
      "Time_End": 1093.8400000000001,
      "Text": " So two tenant-level roles have the ability to do this."
    },
    {
      "Time_Start": 1093.8400000000001,
      "Time_End": 1098.48,
      "Text": " One is application admin, and the other is cloud app admin."
    },
    {
      "Time_Start": 1098.48,
      "Time_End": 1102.0400000000002,
      "Text": " And alternatively, service principles can also have owners."
    },
    {
      "Time_Start": 1102.0400000000002,
      "Time_End": 1104.96,
      "Text": " They can have more than one."
    },
    {
      "Time_Start": 1104.96,
      "Time_End": 1108.88,
      "Text": " And owners can also create new secrets for service principles."
    },
    {
      "Time_Start": 1108.88,
      "Time_End": 1116.7600000000002,
      "Text": " You can abuse this with the Microsoft cmdlet new AZ AD app credential."
    },
    {
      "Time_Start": 1116.7600000000002,
      "Time_End": 1118.72,
      "Text": " The next object is AZ app."
    },
    {
      "Time_Start": 1118.72,
      "Time_End": 1123.68,
      "Text": " So we're going to talk more about this in the attack path demo that we look at after"
    },
    {
      "Time_Start": 1123.68,
      "Time_End": 1125.0,
      "Text": " all this."
    },
    {
      "Time_Start": 1125.0,
      "Time_End": 1129.92,
      "Text": " But the abuse here is the exact same as for a service principle because an AZ app is going"
    },
    {
      "Time_Start": 1129.92,
      "Time_End": 1135.96,
      "Text": " to have an associated AZ service principle that the app is actually using to authenticate"
    },
    {
      "Time_Start": 1135.96,
      "Time_End": 1139.32,
      "Text": " the tenant to do whatever it needs to do against the tenant."
    },
    {
      "Time_Start": 1139.32,
      "Time_End": 1140.8,
      "Text": " So again, the abuse here is the exact same."
    },
    {
      "Time_Start": 1140.8,
      "Time_End": 1144.96,
      "Text": " You're going to create a new secret for the service principle that is associated with"
    },
    {
      "Time_Start": 1144.96,
      "Time_End": 1147.1000000000001,
      "Text": " the app."
    },
    {
      "Time_Start": 1147.1000000000001,
      "Time_End": 1150.4,
      "Text": " Same roles that you can use to abuse this."
    },
    {
      "Time_Start": 1150.4,
      "Time_End": 1152.92,
      "Text": " Application admin and cloud app admin."
    },
    {
      "Time_Start": 1152.92,
      "Time_End": 1157.8400000000001,
      "Text": " Something relatively new is that while these two tenant-level roles let you do this, there"
    },
    {
      "Time_Start": 1157.8400000000001,
      "Time_End": 1163.16,
      "Text": " are also app-level roles that let you do this as well."
    },
    {
      "Time_Start": 1163.16,
      "Time_End": 1168.28,
      "Text": " And alternatively, apps can also have owners that will let you do this abuse."
    },
    {
      "Time_Start": 1168.28,
      "Time_End": 1169.28,
      "Text": " Two different ways that you can do this."
    },
    {
      "Time_Start": 1169.28,
      "Time_End": 1174.76,
      "Text": " This one you can abuse through the portal UI, the Azure portal UI."
    },
    {
      "Time_Start": 1174.76,
      "Time_End": 1182.0400000000002,
      "Text": " Or you can use the same cmdlet from Microsoft, new AZ AD app credential."
    },
    {
      "Time_Start": 1182.0400000000002,
      "Time_End": 1183.8400000000001,
      "Text": " Next device is AZ device."
    },
    {
      "Time_Start": 1183.8400000000001,
      "Time_End": 1190.26,
      "Text": " And so this is going to be any Windows or OSX device that is joined to the Azure tenant."
    },
    {
      "Time_Start": 1190.26,
      "Time_End": 1196.46,
      "Text": " Now it needs to be either strictly joined just to that tenant, or it has to be hybrid"
    },
    {
      "Time_Start": 1196.46,
      "Time_End": 1197.46,
      "Text": " joined."
    },
    {
      "Time_Start": 1197.46,
      "Time_End": 1200.86,
      "Text": " But the device being registered is not good enough."
    },
    {
      "Time_Start": 1200.86,
      "Time_End": 1204.34,
      "Text": " That logic, again, the Azure Hound data collector takes care of for you."
    },
    {
      "Time_Start": 1204.34,
      "Time_End": 1209.62,
      "Text": " So whatever connections you see between users having control of the device, it is going"
    },
    {
      "Time_Start": 1209.62,
      "Time_End": 1210.86,
      "Text": " to be an abusable relationship."
    },
    {
      "Time_Start": 1210.86,
      "Time_End": 1218.06,
      "Text": " And the abuse here is that you can run PowerShell scripts as the system user through Endpoint"
    },
    {
      "Time_Start": 1218.06,
      "Time_End": 1219.22,
      "Text": " Manager."
    },
    {
      "Time_Start": 1219.22,
      "Time_End": 1223.9,
      "Text": " So two roles that let you do this, global admin and Intune admin."
    },
    {
      "Time_Start": 1223.9,
      "Time_End": 1226.5,
      "Text": " You can abuse this with the Endpoint Manager web UI."
    },
    {
      "Time_Start": 1226.5,
      "Time_End": 1231.06,
      "Text": " Or in PowerAzure, there's a cmdlet called new Azure Intune script that will let you"
    },
    {
      "Time_Start": 1231.06,
      "Time_End": 1232.9,
      "Text": " abuse this as well."
    },
    {
      "Time_Start": 1232.9,
      "Time_End": 1235.02,
      "Text": " And then moving down to the resource manager level."
    },
    {
      "Time_Start": 1235.02,
      "Time_End": 1238.94,
      "Text": " So there's three kind of objects that will behave the same way."
    },
    {
      "Time_Start": 1238.94,
      "Time_End": 1243.1000000000001,
      "Text": " And so these objects, they're going to help you keep track of the hierarchy."
    },
    {
      "Time_Start": 1243.1000000000001,
      "Time_End": 1249.7400000000002,
      "Text": " So from tenant down to management group, down to subscription, et cetera."
    },
    {
      "Time_Start": 1249.7400000000002,
      "Time_End": 1255.7,
      "Text": " But the nature of Azure is that any abusable privilege that is on a subscription, for example,"
    },
    {
      "Time_Start": 1255.7,
      "Time_End": 1259.2600000000002,
      "Text": " it's going to inherit down to all the other objects underneath it."
    },
    {
      "Time_Start": 1259.2600000000002,
      "Time_End": 1263.46,
      "Text": " So if you do have an abusable privilege on one of these objects, you're also going to"
    },
    {
      "Time_Start": 1263.46,
      "Time_End": 1267.46,
      "Text": " have that abusable privilege on the object that you can actually do something against,"
    },
    {
      "Time_Start": 1267.46,
      "Time_End": 1268.9,
      "Text": " like a VM."
    },
    {
      "Time_Start": 1268.9,
      "Time_End": 1273.38,
      "Text": " So the abuse here is going to vary depending on what type of descendant object it is that"
    },
    {
      "Time_Start": 1273.38,
      "Time_End": 1275.5400000000002,
      "Text": " you're actually targeting."
    },
    {
      "Time_Start": 1275.5400000000002,
      "Time_End": 1278.26,
      "Text": " And the roles, same story."
    },
    {
      "Time_Start": 1278.26,
      "Time_End": 1280.46,
      "Text": " And the actual command that you use, same story."
    },
    {
      "Time_Start": 1280.46,
      "Time_End": 1284.8600000000001,
      "Text": " It's going to depend on what type of object it is that you're actually abusing."
    },
    {
      "Time_Start": 1284.8600000000001,
      "Time_End": 1286.26,
      "Text": " Next is a AZ key vault."
    },
    {
      "Time_Start": 1286.26,
      "Time_End": 1291.7,
      "Text": " So this is a key vault that contains certificates, clear text passwords, secrets, all kinds of"
    },
    {
      "Time_Start": 1291.7,
      "Time_End": 1292.98,
      "Text": " goodies."
    },
    {
      "Time_Start": 1292.98,
      "Time_End": 1295.5800000000002,
      "Text": " The abuse here, you can read them."
    },
    {
      "Time_Start": 1295.58,
      "Time_End": 1301.02,
      "Text": " So you can read plain text passwords, read plain text secrets, read certificates."
    },
    {
      "Time_Start": 1301.02,
      "Time_End": 1306.62,
      "Text": " And the abuse there would be just to use those secrets, use those certs wherever they're"
    },
    {
      "Time_Start": 1306.62,
      "Time_End": 1308.46,
      "Text": " actually valid."
    },
    {
      "Time_Start": 1308.46,
      "Time_End": 1311.1399999999999,
      "Text": " We're not currently keeping track of that in the graph database."
    },
    {
      "Time_Start": 1311.1399999999999,
      "Time_End": 1312.98,
      "Text": " We might in the future."
    },
    {
      "Time_Start": 1312.98,
      "Time_End": 1315.8999999999999,
      "Text": " But right now, you're going to have to do your own homework to figure out where those"
    },
    {
      "Time_Start": 1315.8999999999999,
      "Time_End": 1317.6799999999998,
      "Text": " secrets are valid."
    },
    {
      "Time_Start": 1317.6799999999998,
      "Time_End": 1324.46,
      "Text": " So the abusable roles here are scoped to the key vault would be owner, contributor, or"
    },
    {
      "Time_Start": 1324.74,
      "Time_End": 1325.74,
      "Text": " user access administrator."
    },
    {
      "Time_Start": 1325.74,
      "Time_End": 1330.38,
      "Text": " And that last one, user access administrator, when you have that role against this object,"
    },
    {
      "Time_Start": 1330.38,
      "Time_End": 1332.98,
      "Text": " you can't directly read the secrets."
    },
    {
      "Time_Start": 1332.98,
      "Time_End": 1336.48,
      "Text": " But you can give yourself the ability to read those secrets."
    },
    {
      "Time_Start": 1336.48,
      "Time_End": 1341.82,
      "Text": " So it's very similar to like write DACL from vanilla AD permissions."
    },
    {
      "Time_Start": 1341.82,
      "Time_End": 1347.74,
      "Text": " Alternatively, there are also key vault specific access policies."
    },
    {
      "Time_Start": 1347.74,
      "Time_End": 1350.9,
      "Text": " So while somebody may not be the owner of a key vault, they may have the ability to"
    },
    {
      "Time_Start": 1350.9,
      "Time_End": 1355.5,
      "Text": " read a secret based on the specific policy on that key vault."
    },
    {
      "Time_Start": 1355.5,
      "Time_End": 1358.96,
      "Text": " And Azure Hound collects all of that for you."
    },
    {
      "Time_Start": 1358.96,
      "Time_End": 1361.3600000000001,
      "Text": " Three different Microsoft commandlets you can use to abuse these."
    },
    {
      "Time_Start": 1361.3600000000001,
      "Time_End": 1366.38,
      "Text": " So get Azure key vault secret, key vault key, or key vault certificate."
    },
    {
      "Time_Start": 1366.38,
      "Time_End": 1368.1000000000001,
      "Text": " Very easy to use."
    },
    {
      "Time_Start": 1368.1000000000001,
      "Time_End": 1370.0600000000002,
      "Text": " And the last new node type is AZVM."
    },
    {
      "Time_Start": 1370.0600000000002,
      "Time_End": 1374.18,
      "Text": " So this is a virtual machine that lives within a resource group, within a subscription that"
    },
    {
      "Time_Start": 1374.18,
      "Time_End": 1377.42,
      "Text": " trusts the tenant that we're analyzing."
    },
    {
      "Time_Start": 1377.42,
      "Time_End": 1380.66,
      "Text": " And so the abuse here, there's actually several different abuses here."
    },
    {
      "Time_Start": 1381.42,
      "Time_End": 1384.02,
      "Text": " You can execute code as the system user on the machine."
    },
    {
      "Time_Start": 1384.02,
      "Time_End": 1387.94,
      "Text": " You can add yourself to the local admins group on the machine."
    },
    {
      "Time_Start": 1387.94,
      "Time_End": 1391.8200000000002,
      "Text": " You can grant yourself RDP privileges on the machine."
    },
    {
      "Time_Start": 1391.8200000000002,
      "Time_End": 1398.8200000000002,
      "Text": " And the roles that you can abuse to do these are owner, contributor, Avere contributor,"
    },
    {
      "Time_Start": 1398.8200000000002,
      "Time_End": 1401.94,
      "Text": " user access administrator, and virtual machine contributor."
    },
    {
      "Time_Start": 1401.94,
      "Time_End": 1404.26,
      "Text": " Again, same story with user access administrator."
    },
    {
      "Time_Start": 1404.26,
      "Time_End": 1408.5,
      "Text": " You don't immediately have the privilege to actually do these abuses, but you can give"
    },
    {
      "Time_Start": 1408.5,
      "Time_End": 1411.3,
      "Text": " yourself that privilege."
    },
    {
      "Time_Start": 1411.3,
      "Time_End": 1412.42,
      "Text": " Couple different ways you can abuse this."
    },
    {
      "Time_Start": 1412.42,
      "Time_End": 1415.94,
      "Text": " You can actually abuse this just through the Azure web portal."
    },
    {
      "Time_Start": 1415.94,
      "Time_End": 1420.14,
      "Text": " Or you can use the Microsoft commandlet, invoke AZVM run command."
    },
    {
      "Time_Start": 1420.14,
      "Time_End": 1421.14,
      "Text": " Simple."
    },
    {
      "Time_Start": 1421.14,
      "Time_End": 1423.1,
      "Text": " So the next thing we'll talk about is Azure Hound."
    },
    {
      "Time_Start": 1423.1,
      "Time_End": 1427.5,
      "Text": " So Azure Hound is the new data collector for Bloodhound 4.0."
    },
    {
      "Time_Start": 1427.5,
      "Time_End": 1430.9,
      "Text": " Azure Hound does all of the Azure data collection."
    },
    {
      "Time_Start": 1430.9,
      "Time_End": 1433.54,
      "Text": " None of that collection lives in Sharp Hound."
    },
    {
      "Time_Start": 1433.54,
      "Time_End": 1439.06,
      "Text": " However, you can still do your normal vanilla AD collection with Sharp Hound, import that"
    },
    {
      "Time_Start": 1439.06,
      "Time_End": 1443.42,
      "Text": " into a database, and import data from Azure Hound into the same database."
    },
    {
      "Time_Start": 1443.42,
      "Time_End": 1445.54,
      "Text": " It's all going to work together just fine."
    },
    {
      "Time_Start": 1445.54,
      "Time_End": 1452.98,
      "Text": " Additionally, if the customer is syncing data up from on-prem AD up into their Azure tenant,"
    },
    {
      "Time_Start": 1452.98,
      "Time_End": 1456.18,
      "Text": " the object IDs, they're all going to match up just fine."
    },
    {
      "Time_Start": 1456.18,
      "Time_End": 1461.22,
      "Text": " And so you're going to be able to find attack paths that start with on-prem principles and"
    },
    {
      "Time_Start": 1461.22,
      "Time_End": 1464.26,
      "Text": " go up into the Azure tenant, and vice versa."
    },
    {
      "Time_Start": 1464.26,
      "Time_End": 1469.8600000000001,
      "Text": " So you'll be able to find attack paths that start in the tenant, go back down to on-prem AD."
    },
    {
      "Time_Start": 1469.8600000000001,
      "Time_End": 1473.26,
      "Text": " And that opens up a lot of really exciting attack path possibilities where you can have"
    },
    {
      "Time_Start": 1473.26,
      "Time_End": 1480.46,
      "Text": " an attack path that starts from a low-privilege user in AD, you go up to global admin at the"
    },
    {
      "Time_Start": 1480.46,
      "Time_End": 1486.38,
      "Text": " tenant, and then you execute code on a hybrid join system, on a system that is joined to"
    },
    {
      "Time_Start": 1486.38,
      "Time_End": 1490.38,
      "Text": " on-prem AD, maybe in the same domain you started off in, and maybe not."
    },
    {
      "Time_Start": 1490.5400000000002,
      "Time_End": 1494.46,
      "Text": " Maybe in a domain that's in a completely separate forest that doesn't even know about the forest"
    },
    {
      "Time_Start": 1494.46,
      "Time_End": 1498.5400000000002,
      "Text": " or the domain that you started off in at the very beginning of that attack path."
    },
    {
      "Time_Start": 1498.5400000000002,
      "Time_End": 1500.7,
      "Text": " So a lot of really exciting attack path possibilities."
    },
    {
      "Time_Start": 1500.7,
      "Time_End": 1502.18,
      "Text": " So Azure Hound."
    },
    {
      "Time_Start": 1502.18,
      "Time_End": 1504.8600000000001,
      "Text": " Azure Hound is written in PowerShell."
    },
    {
      "Time_Start": 1504.8600000000001,
      "Time_End": 1509.6200000000001,
      "Text": " It requires the Microsoft Azure modules."
    },
    {
      "Time_Start": 1509.6200000000001,
      "Time_End": 1512.46,
      "Text": " So I'll show you how to install those."
    },
    {
      "Time_Start": 1512.46,
      "Time_End": 1516.14,
      "Text": " And then anywhere that your user that is going to authenticate to the tenant, anywhere that"
    },
    {
      "Time_Start": 1516.14,
      "Time_End": 1520.42,
      "Text": " user can authenticate from, you're going to be able to run Azure Hound from."
    },
    {
      "Time_Start": 1520.42,
      "Time_End": 1524.7,
      "Text": " So you may not even need to be on a system within the customer LAN to do this data collection."
    },
    {
      "Time_Start": 1524.7,
      "Time_End": 1528.9,
      "Text": " So okay, you've got Azure creds, you're ready to run Azure Hound."
    },
    {
      "Time_Start": 1528.9,
      "Time_End": 1531.18,
      "Text": " First thing you're going to do is open up PowerShell."
    },
    {
      "Time_Start": 1531.18,
      "Time_End": 1534.74,
      "Text": " You want to run this as administrator because you're probably going to need to install the"
    },
    {
      "Time_Start": 1534.74,
      "Time_End": 1543.94,
      "Text": " Azure modules."
    },
    {
      "Time_Start": 1543.94,
      "Time_End": 1547.78,
      "Text": " And then because we are going to import Azure Hound, we're going to go ahead and open up"
    },
    {
      "Time_Start": 1547.78,
      "Time_End": 1553.06,
      "Text": " a PowerShell instance with the execution policy bypassed."
    },
    {
      "Time_Start": 1553.06,
      "Time_End": 1557.7,
      "Text": " And first thing we'll do is we'll install the AZ module with this command here."
    },
    {
      "Time_Start": 1557.7,
      "Time_End": 1562.1000000000001,
      "Text": " And we'll wait for that to go through its process."
    },
    {
      "Time_Start": 1562.1000000000001,
      "Time_End": 1567.1000000000001,
      "Text": " And then we'll install the module Azure AD preview."
    },
    {
      "Time_Start": 1567.1000000000001,
      "Time_End": 1570.5800000000002,
      "Text": " And then we're going to authenticate to the tenant with two different commands."
    },
    {
      "Time_Start": 1570.58,
      "Time_End": 1575.34,
      "Text": " First we'll connect with Azure AD, and that'll bring up this pop up that will enter our username"
    },
    {
      "Time_Start": 1575.34,
      "Time_End": 1577.1399999999999,
      "Text": " and password at."
    },
    {
      "Time_Start": 1577.1399999999999,
      "Time_End": 1582.1399999999999,
      "Text": " You may also have to do MFA here if that's set up for that user."
    },
    {
      "Time_Start": 1582.1399999999999,
      "Time_End": 1588.3799999999999,
      "Text": " After that's authenticated, then we'll connect with connect AZ account, same process."
    },
    {
      "Time_Start": 1588.3799999999999,
      "Time_End": 1592.62,
      "Text": " And you see this warning here that my tenant has more than one active subscription."
    },
    {
      "Time_Start": 1592.62,
      "Time_End": 1594.26,
      "Text": " Azure Hound takes care of that for you."
    },
    {
      "Time_Start": 1594.26,
      "Time_End": 1598.4199999999998,
      "Text": " It will loop through all the different subscriptions that are available under that tenant."
    },
    {
      "Time_Start": 1598.42,
      "Time_End": 1602.42,
      "Text": " So next we will just make sure that we're in the right directory."
    },
    {
      "Time_Start": 1602.42,
      "Time_End": 1606.74,
      "Text": " And then we'll dot import the Azure Hound PS1."
    },
    {
      "Time_Start": 1606.74,
      "Time_End": 1609.42,
      "Text": " That has a command in it called invoke Azure Hound."
    },
    {
      "Time_Start": 1609.42,
      "Time_End": 1611.26,
      "Text": " So that's what we'll run."
    },
    {
      "Time_Start": 1611.26,
      "Time_End": 1615.3000000000002,
      "Text": " That's going to go through its process of enumerating all of the users, all of the groups,"
    },
    {
      "Time_Start": 1615.3000000000002,
      "Time_End": 1622.1000000000001,
      "Text": " all of the roles, everything under every subscription, and all that good stuff."
    },
    {
      "Time_Start": 1622.1000000000001,
      "Time_End": 1626.46,
      "Text": " Once the data collection is done, it is going to output a bunch of files."
    },
    {
      "Time_Start": 1626.46,
      "Time_End": 1630.3400000000001,
      "Text": " And then it will put all those files into a zip for you."
    },
    {
      "Time_Start": 1630.3400000000001,
      "Time_End": 1634.14,
      "Text": " And then just like with Sharp Hound data, Sharp Hound also exports a zip."
    },
    {
      "Time_Start": 1634.14,
      "Time_End": 1638.22,
      "Text": " And so to import all the data that we just collected with Azure Hound, all we do is simply"
    },
    {
      "Time_Start": 1638.22,
      "Time_End": 1643.94,
      "Text": " drag and drop into the Bloodhound GUI."
    },
    {
      "Time_Start": 1643.94,
      "Time_End": 1649.8600000000001,
      "Text": " So Azure Hound will collect data from the tenant and also at the resource manager level."
    },
    {
      "Time_Start": 1649.8600000000001,
      "Time_End": 1651.8600000000001,
      "Text": " And it's going to collect information about these nodes here."
    },
    {
      "Time_Start": 1651.8600000000001,
      "Time_End": 1656.14,
      "Text": " So tenants, groups, users, VMs, key vaults, et cetera."
    },
    {
      "Time_Start": 1656.14,
      "Time_End": 1660.3400000000001,
      "Text": " Including this top section right here, this is all constrained within Azure Active Directory."
    },
    {
      "Time_Start": 1660.3400000000001,
      "Time_End": 1664.74,
      "Text": " And by default, anybody who can authenticate to the tenant does have read permissions."
    },
    {
      "Time_Start": 1664.74,
      "Time_End": 1669.22,
      "Text": " So you shouldn't have any problem reading the permissions and the properties of the"
    },
    {
      "Time_Start": 1669.22,
      "Time_End": 1670.6200000000001,
      "Text": " objects at that level."
    },
    {
      "Time_Start": 1670.6200000000001,
      "Time_End": 1674.0200000000002,
      "Text": " However, at the bottom level, this is all within Azure Resource Manager."
    },
    {
      "Time_Start": 1674.0200000000002,
      "Time_End": 1680.42,
      "Text": " So for management groups, VMs, key vaults, and subs, by default, users do not have the"
    },
    {
      "Time_Start": 1680.42,
      "Time_End": 1684.26,
      "Text": " ability to read these objects or read the permissions on these objects."
    },
    {
      "Time_Start": 1684.26,
      "Time_End": 1687.22,
      "Text": " So if you want to read the information about those, you're going to have to compromise"
    },
    {
      "Time_Start": 1687.22,
      "Time_End": 1690.7,
      "Text": " a user that does have that, or you're going to have to otherwise find a way to do that"
    },
    {
      "Time_Start": 1690.7,
      "Time_End": 1694.98,
      "Text": " data collection with a user that has that read privilege."
    },
    {
      "Time_Start": 1694.98,
      "Time_End": 1697.42,
      "Text": " And then secondly, I want to talk about what kind of performance you should be able to"
    },
    {
      "Time_Start": 1697.42,
      "Time_End": 1702.02,
      "Text": " expect from Azure Hound based on the size of the tenant that you're operating in."
    },
    {
      "Time_Start": 1702.02,
      "Time_End": 1704.86,
      "Text": " So we've tested Azure Hound out in a few different tenants."
    },
    {
      "Time_Start": 1704.86,
      "Time_End": 1708.54,
      "Text": " The smallest one was about 9,000 users."
    },
    {
      "Time_Start": 1708.54,
      "Time_End": 1711.94,
      "Text": " The second largest was about 105,000 users."
    },
    {
      "Time_Start": 1712.42,
      "Time_End": 1717.3,
      "Text": " And the largest that we've been able to test Azure Hound in so far had a tenant that had"
    },
    {
      "Time_Start": 1717.3,
      "Time_End": 1719.8200000000002,
      "Text": " 240,000 users in it."
    },
    {
      "Time_Start": 1719.8200000000002,
      "Time_End": 1726.22,
      "Text": " So that 9,000 user tenant, Azure Hound completes in 20 minutes."
    },
    {
      "Time_Start": 1726.22,
      "Time_End": 1732.22,
      "Text": " In the tenant that had just over 100,000 users, Azure Hound finishes in 62 minutes, so about"
    },
    {
      "Time_Start": 1732.22,
      "Time_End": 1734.18,
      "Text": " an hour."
    },
    {
      "Time_Start": 1734.18,
      "Time_End": 1740.74,
      "Text": " And in the tenant that had 240,000 users, Azure Hound finished in 114 minutes."
    },
    {
      "Time_Start": 1740.74,
      "Time_End": 1742.94,
      "Text": " You can see how many users there are in the tenant."
    },
    {
      "Time_Start": 1742.94,
      "Time_End": 1747.98,
      "Text": " If you go into the portal and then click on users, it will actually give you a count of"
    },
    {
      "Time_Start": 1747.98,
      "Time_End": 1751.98,
      "Text": " how many users there are in that tenant right there."
    },
    {
      "Time_Start": 1751.98,
      "Time_End": 1757.3,
      "Text": " All right."
    },
    {
      "Time_Start": 1757.3,
      "Time_End": 1762.1,
      "Text": " So this is the part I'm most excited for, is showing you the new Bloodhound GUI."
    },
    {
      "Time_Start": 1762.1,
      "Time_End": 1766.86,
      "Text": " So the Bloodhound GUI has gone through a lot of changes over the past four years."
    },
    {
      "Time_Start": 1767.5400000000002,
      "Time_End": 1771.5400000000002,
      "Text": " In fact, I wanted to show a screenshot of what the Bloodhound GUI first looked like."
    },
    {
      "Time_Start": 1771.5400000000002,
      "Time_End": 1777.5000000000002,
      "Text": " So when Rohan first created the GUI back in 2016, this was like in February or March of"
    },
    {
      "Time_Start": 1777.5000000000002,
      "Time_End": 1781.6200000000001,
      "Text": " 2016, it was actually called the Offensive Dashboard."
    },
    {
      "Time_Start": 1781.6200000000001,
      "Time_End": 1785.14,
      "Text": " And we kind of lovingly refer to it nowadays as test.html."
    },
    {
      "Time_Start": 1785.14,
      "Time_End": 1787.66,
      "Text": " So that's what that looks like right here."
    },
    {
      "Time_Start": 1787.66,
      "Time_End": 1789.98,
      "Text": " And then over the years, it's gone through a lot of evolution."
    },
    {
      "Time_Start": 1789.98,
      "Time_End": 1795.7,
      "Text": " And so now, for the 4.0 release, we do have a completely refreshed color scheme."
    },
    {
      "Time_Start": 1795.7,
      "Time_End": 1799.3400000000001,
      "Text": " And we've changed a lot of the look and the feel of the UI as well."
    },
    {
      "Time_Start": 1799.3400000000001,
      "Time_End": 1802.3,
      "Text": " So if you've been a Bloodhound user before, it's going to be very familiar to you."
    },
    {
      "Time_Start": 1802.3,
      "Time_End": 1805.66,
      "Text": " And yeah, let's check out what it looks like."
    },
    {
      "Time_Start": 1805.66,
      "Time_End": 1811.22,
      "Text": " So immediately when you open up the Bloodhound GUI, you're going to have this new login interface."
    },
    {
      "Time_Start": 1811.22,
      "Time_End": 1814.74,
      "Text": " Still functionally very similar, just kind of has a new refreshed look."
    },
    {
      "Time_Start": 1814.74,
      "Time_End": 1823.42,
      "Text": " So we'll go ahead and log in."
    },
    {
      "Time_Start": 1823.42,
      "Time_End": 1829.98,
      "Text": " And what I want to show you is by way of looking at how to analyze some of the new objects"
    },
    {
      "Time_Start": 1829.98,
      "Time_End": 1834.92,
      "Text": " in Azure, what some of the new design is in the GUI."
    },
    {
      "Time_Start": 1834.92,
      "Time_End": 1840.7,
      "Text": " So instead of looking at domain admins, for example, what we care about the most is who"
    },
    {
      "Time_Start": 1840.7,
      "Time_End": 1842.78,
      "Text": " has control of the tenant."
    },
    {
      "Time_Start": 1842.78,
      "Time_End": 1846.72,
      "Text": " So in the search bar, I'm going to start looking for a tenant."
    },
    {
      "Time_Start": 1846.72,
      "Time_End": 1848.14,
      "Text": " And so that's going to autofill for me."
    },
    {
      "Time_Start": 1848.14,
      "Time_End": 1851.14,
      "Text": " And I can either click on this, or I can hit Enter or whatever."
    },
    {
      "Time_Start": 1851.14,
      "Time_End": 1852.54,
      "Text": " I'm just going to click on this."
    },
    {
      "Time_Start": 1852.6599999999999,
      "Time_End": 1855.58,
      "Text": " And so here's my tenant from my lab environment."
    },
    {
      "Time_Start": 1855.58,
      "Time_End": 1858.1599999999999,
      "Text": " This is my default directory tenant."
    },
    {
      "Time_Start": 1858.1599999999999,
      "Time_End": 1861.98,
      "Text": " So I'll click on this, and I've got all kinds of really nice info here about the tenant."
    },
    {
      "Time_Start": 1861.98,
      "Time_End": 1868.1,
      "Text": " I've got the object ID, I've got what objects descend under it, who has control of the tenant."
    },
    {
      "Time_Start": 1868.1,
      "Time_End": 1871.6599999999999,
      "Text": " So here's where we're going to be able to see who has global admin privilege against"
    },
    {
      "Time_Start": 1871.6599999999999,
      "Time_End": 1873.1,
      "Text": " this particular tenant."
    },
    {
      "Time_Start": 1873.1,
      "Time_End": 1875.8999999999999,
      "Text": " And so I can see who all those users are there."
    },
    {
      "Time_Start": 1875.8999999999999,
      "Time_End": 1880.46,
      "Text": " Interestingly, you actually can have on-prem users or on-prem security principles that"
    },
    {
      "Time_Start": 1880.46,
      "Time_End": 1883.06,
      "Text": " have global admin rights in the tenant."
    },
    {
      "Time_Start": 1883.06,
      "Time_End": 1889.7,
      "Text": " So that opens up really interesting attack paths for going from on-prem up into the tenant."
    },
    {
      "Time_Start": 1889.7,
      "Time_End": 1892.1000000000001,
      "Text": " We can also see who our privileged role admins are."
    },
    {
      "Time_Start": 1892.1000000000001,
      "Time_End": 1896.5,
      "Text": " So recall, that's the second role that gives you control of the tenant by way of being"
    },
    {
      "Time_Start": 1896.5,
      "Time_End": 1901.66,
      "Text": " able to grant yourself global admin by being a PRA."
    },
    {
      "Time_Start": 1901.66,
      "Time_End": 1910.42,
      "Text": " We can also see where in the tenant sub-resource group, all like that tree where our VMs live"
    },
    {
      "Time_Start": 1910.98,
      "Time_End": 1916.02,
      "Text": " So if we click on total VM objects, we see that there's 12 VMs within this tenant."
    },
    {
      "Time_Start": 1916.02,
      "Time_End": 1921.8200000000002,
      "Text": " So this directory contains this sub, which contains these resource groups right here,"
    },
    {
      "Time_Start": 1921.8200000000002,
      "Time_End": 1923.74,
      "Text": " which contains all these VMs right here."
    },
    {
      "Time_Start": 1923.74,
      "Time_End": 1929.3000000000002,
      "Text": " So this is a nice visual way to understand that hierarchy in the tenant."
    },
    {
      "Time_Start": 1929.3000000000002,
      "Time_End": 1931.22,
      "Text": " We can do the same thing for key vaults."
    },
    {
      "Time_Start": 1931.22,
      "Time_End": 1937.54,
      "Text": " And so in my little test tenant, I only have one key vault, which is here."
    },
    {
      "Time_Start": 1937.54,
      "Time_End": 1941.82,
      "Text": " And then we can also look at what users there are in the tenant, what security groups there"
    },
    {
      "Time_Start": 1941.82,
      "Time_End": 1942.82,
      "Text": " are in the tenant."
    },
    {
      "Time_Start": 1942.82,
      "Time_End": 1945.82,
      "Text": " So that's pretty simple."
    },
    {
      "Time_Start": 1945.82,
      "Time_End": 1955.54,
      "Text": " What we can also do is we can look at what attack paths there are for gaining control"
    },
    {
      "Time_Start": 1955.54,
      "Time_End": 1956.54,
      "Text": " of the tenant."
    },
    {
      "Time_Start": 1956.54,
      "Time_End": 1960.3799999999999,
      "Text": " So if we right click on the tenant, or if you right click on any object, so right click"
    },
    {
      "Time_Start": 1960.3799999999999,
      "Time_End": 1964.7,
      "Text": " on that and we'll say shortest paths to here."
    },
    {
      "Time_Start": 1964.7,
      "Time_End": 1969.7,
      "Text": " So that'll run the shortest paths query against Neo4j and then render the results here in"
    },
    {
      "Time_Start": 1969.7,
      "Time_End": 1971.1000000000001,
      "Text": " the Bloodhound GUI."
    },
    {
      "Time_Start": 1971.1000000000001,
      "Time_End": 1975.42,
      "Text": " And so what you see here is pretty minimal compared to what you'll actually see in a"
    },
    {
      "Time_Start": 1975.42,
      "Time_End": 1976.9,
      "Text": " real tenant."
    },
    {
      "Time_Start": 1976.9,
      "Time_End": 1978.74,
      "Text": " We've got all of our global admins here."
    },
    {
      "Time_Start": 1978.74,
      "Time_End": 1984.02,
      "Text": " We've got a user that's a privileged role admin, a PRA."
    },
    {
      "Time_Start": 1984.02,
      "Time_End": 1987.94,
      "Text": " We've also got an app right here that runs as this service principle, which is a global"
    },
    {
      "Time_Start": 1987.94,
      "Time_End": 1988.94,
      "Text": " admin."
    },
    {
      "Time_Start": 1988.94,
      "Time_End": 1993.42,
      "Text": " And then the example attack path that we're going to look at is actually here at the bottom."
    },
    {
      "Time_Start": 1993.42,
      "Time_End": 2000.3000000000002,
      "Text": " So this user owns this app object and this app runs as this service principle."
    },
    {
      "Time_Start": 2000.3000000000002,
      "Time_End": 2004.3000000000002,
      "Text": " And this service principle has the global admin role against the tenant."
    },
    {
      "Time_Start": 2004.3000000000002,
      "Time_End": 2005.3000000000002,
      "Text": " So we'll save that for later."
    },
    {
      "Time_Start": 2005.3000000000002,
      "Time_End": 2007.8600000000001,
      "Text": " We're going to, we're going to come back to that when we actually look at how to execute"
    },
    {
      "Time_Start": 2007.8600000000001,
      "Time_End": 2008.8600000000001,
      "Text": " that attack path."
    },
    {
      "Time_Start": 2008.8600000000001,
      "Time_End": 2013.0600000000002,
      "Text": " But we can also do is we can understand what privileges there are against a certain, certain"
    },
    {
      "Time_Start": 2013.0600000000002,
      "Time_End": 2014.0600000000002,
      "Text": " kind of object."
    },
    {
      "Time_Start": 2014.0600000000002,
      "Time_End": 2016.8200000000002,
      "Text": " So let's take a look at a VM."
    },
    {
      "Time_Start": 2016.8200000000002,
      "Time_End": 2023.26,
      "Text": " Let's look at this VM called Winton AAD joined."
    },
    {
      "Time_Start": 2024.1,
      "Time_End": 2029.9,
      "Text": " So if we click on that computer and we come down to inbound object control, we can see"
    },
    {
      "Time_Start": 2029.9,
      "Time_End": 2034.1,
      "Text": " that there are two objects that have explicit control of that computer."
    },
    {
      "Time_Start": 2034.1,
      "Time_End": 2039.46,
      "Text": " So, so that Alice user has the VM contributor role against the computer or the VM."
    },
    {
      "Time_Start": 2039.46,
      "Time_End": 2043.58,
      "Text": " And then this service principle right here has contributor role against that computer"
    },
    {
      "Time_Start": 2043.58,
      "Time_End": 2046.52,
      "Text": " as well, that VM."
    },
    {
      "Time_Start": 2046.52,
      "Time_End": 2052.66,
      "Text": " More interestingly than that is we can look at what possible attack paths there are to"
    },
    {
      "Time_Start": 2053.06,
      "Time_End": 2054.06,
      "Text": " land on this computer."
    },
    {
      "Time_Start": 2054.06,
      "Time_End": 2058.62,
      "Text": " So we refer to that in the Bloodhound GUI as transitive object controllers."
    },
    {
      "Time_Start": 2058.62,
      "Time_End": 2059.8599999999997,
      "Text": " So we're going to click on this twice."
    },
    {
      "Time_Start": 2059.8599999999997,
      "Time_End": 2063.06,
      "Text": " We're going to click on it once to get the calculation done and then we'll click on it"
    },
    {
      "Time_Start": 2063.06,
      "Time_End": 2065.92,
      "Text": " again to actually see the result."
    },
    {
      "Time_Start": 2065.92,
      "Time_End": 2069.8599999999997,
      "Text": " So here's the computer here on the very far right."
    },
    {
      "Time_Start": 2069.8599999999997,
      "Time_End": 2073.42,
      "Text": " And we can see that this security group right here, this, this is an on-prem security group"
    },
    {
      "Time_Start": 2073.42,
      "Time_End": 2079.2999999999997,
      "Text": " actually has the AZ user access administrator role against that computer."
    },
    {
      "Time_Start": 2079.34,
      "Time_End": 2083.34,
      "Text": " So anybody in this group, which we don't actually have anybody in that group right now, but"
    },
    {
      "Time_Start": 2083.34,
      "Time_End": 2088.02,
      "Text": " anybody who would be in that group would have the ability to grant themselves control of"
    },
    {
      "Time_Start": 2088.02,
      "Time_End": 2089.78,
      "Text": " this computer."
    },
    {
      "Time_Start": 2089.78,
      "Time_End": 2094.86,
      "Text": " We also see that this user has the AZ VM contributor role against that computer."
    },
    {
      "Time_Start": 2094.86,
      "Time_End": 2098.42,
      "Text": " There are several users who can reset that user's password."
    },
    {
      "Time_Start": 2098.42,
      "Time_End": 2104.1200000000003,
      "Text": " And again, Azure Hound does all that logic for you to say roles that each of these users"
    },
    {
      "Time_Start": 2104.12,
      "Time_End": 2109.88,
      "Text": " have compared to roles that are held by this user to give you the, the correct assessment"
    },
    {
      "Time_Start": 2109.88,
      "Time_End": 2114.64,
      "Text": " of which users can actually reset that user's password."
    },
    {
      "Time_Start": 2114.64,
      "Time_End": 2121.3199999999997,
      "Text": " And then because this user, because this Alice user is a cloud resident user in the tenant"
    },
    {
      "Time_Start": 2121.3199999999997,
      "Time_End": 2127.68,
      "Text": " and because they are not an external user, we do put that user directly under the tenant"
    },
    {
      "Time_Start": 2127.68,
      "Time_End": 2129.2799999999997,
      "Text": " object right here."
    },
    {
      "Time_Start": 2129.2799999999997,
      "Time_End": 2132.88,
      "Text": " And so then anybody who has control of the tenant or anybody who can get control of the"
    },
    {
      "Time_Start": 2132.88,
      "Time_End": 2140.7200000000003,
      "Text": " tenant can get control of this user and they can take control of that computer."
    },
    {
      "Time_Start": 2140.7200000000003,
      "Time_End": 2146.28,
      "Text": " We see something interesting here as well is that this computer, it's contained within"
    },
    {
      "Time_Start": 2146.28,
      "Time_End": 2150.8,
      "Text": " this resource group right here called VMRG001."
    },
    {
      "Time_Start": 2150.8,
      "Time_End": 2158.2400000000002,
      "Text": " Now this resource group is actually owned by this security group right here called MySecurityGroup."
    },
    {
      "Time_Start": 2158.2400000000002,
      "Time_End": 2160.9,
      "Text": " And then within that group, we've got another group."
    },
    {
      "Time_Start": 2160.9,
      "Time_End": 2162.82,
      "Text": " So Cloud Help Desk Group."
    },
    {
      "Time_Start": 2162.82,
      "Time_End": 2166.7400000000002,
      "Text": " And then within that group, we have another group, which the name we couldn't resolve"
    },
    {
      "Time_Start": 2166.7400000000002,
      "Time_End": 2169.9,
      "Text": " and we'll fix that before we release."
    },
    {
      "Time_Start": 2169.9,
      "Time_End": 2174.5,
      "Text": " But anybody who would be in this group is going to have the same privilege that this"
    },
    {
      "Time_Start": 2174.5,
      "Time_End": 2175.5,
      "Text": " group has."
    },
    {
      "Time_Start": 2175.5,
      "Time_End": 2178.82,
      "Text": " So they're going to have membership in this group."
    },
    {
      "Time_Start": 2178.82,
      "Time_End": 2181.7400000000002,
      "Text": " They're going to have ownership of this resource group."
    },
    {
      "Time_Start": 2181.7400000000002,
      "Time_End": 2186.62,
      "Text": " That's going to give them the ability to give themselves a new role against this resource"
    },
    {
      "Time_Start": 2186.62,
      "Time_End": 2192.5,
      "Text": " group, which could be VM contributor or anything else that would give you control of that VM."
    },
    {
      "Time_Start": 2192.5,
      "Time_End": 2194.5,
      "Text": " And they're going to be able to control this VM."
    },
    {
      "Time_Start": 2194.5,
      "Time_End": 2200.06,
      "Text": " They're going to be able to execute code as a system user on that VM."
    },
    {
      "Time_Start": 2200.06,
      "Time_End": 2203.38,
      "Text": " And then just a few other things about the UI that I kind of want to show you as far"
    },
    {
      "Time_Start": 2203.38,
      "Time_End": 2204.9,
      "Text": " as the refresh goes."
    },
    {
      "Time_Start": 2204.9,
      "Time_End": 2206.8599999999997,
      "Text": " The spotlight model has been changed."
    },
    {
      "Time_Start": 2206.8599999999997,
      "Time_End": 2212.62,
      "Text": " So when you look at a graph like this, there's a lot of nodes on here and you may want to"
    },
    {
      "Time_Start": 2212.62,
      "Time_End": 2215.8199999999997,
      "Text": " get help finding the node that you think might be on here or you just might want to see a"
    },
    {
      "Time_Start": 2215.82,
      "Time_End": 2218.6600000000003,
      "Text": " list of what nodes are represented in this graph."
    },
    {
      "Time_Start": 2218.6600000000003,
      "Time_End": 2222.38,
      "Text": " If you hit the space bar, that will bring up the spotlight."
    },
    {
      "Time_Start": 2222.38,
      "Time_End": 2224.84,
      "Text": " And so the spotlight has been redesigned."
    },
    {
      "Time_Start": 2224.84,
      "Time_End": 2226.94,
      "Text": " So it's a lot easier to read through."
    },
    {
      "Time_Start": 2226.94,
      "Time_End": 2230.34,
      "Text": " What you can do is you can scroll through this list and you can click on, for example,"
    },
    {
      "Time_Start": 2230.34,
      "Time_End": 2236.04,
      "Text": " if I click on SOC level 3, it'll zoom in and temporarily highlight that object for me."
    },
    {
      "Time_Start": 2236.04,
      "Time_End": 2238.5800000000004,
      "Text": " What I can also do is I can search for a node right here."
    },
    {
      "Time_Start": 2238.5800000000004,
      "Time_End": 2244.94,
      "Text": " So if I want to search for like the Jeff Demick user right here, so I type that, it constrains"
    },
    {
      "Time_Start": 2244.94,
      "Time_End": 2248.18,
      "Text": " this list to only see what nodes match that string."
    },
    {
      "Time_Start": 2248.18,
      "Time_End": 2252.9,
      "Text": " And I can click on Jeff and I can see, okay, his user is actually over here."
    },
    {
      "Time_Start": 2252.9,
      "Time_End": 2258.3,
      "Text": " So the other thing that we've kind of redesigned is the database info tab."
    },
    {
      "Time_Start": 2258.3,
      "Time_End": 2261.62,
      "Text": " So here you've got DB stats."
    },
    {
      "Time_Start": 2261.62,
      "Time_End": 2265.14,
      "Text": " So this is going to be just basic stats about the database."
    },
    {
      "Time_Start": 2265.14,
      "Time_End": 2269.8,
      "Text": " So what the address is, the user that you're connected to it as, how many user sessions"
    },
    {
      "Time_Start": 2269.8,
      "Time_End": 2274.04,
      "Text": " there are, how many total relationships, ACLs, and how many Azure relationships there"
    },
    {
      "Time_Start": 2274.04,
      "Time_End": 2275.0800000000004,
      "Text": " are."
    },
    {
      "Time_Start": 2275.0800000000004,
      "Time_End": 2282.6800000000003,
      "Text": " And then the object counts and the relationship counts between cloud nodes and on-prem nodes"
    },
    {
      "Time_Start": 2282.6800000000003,
      "Time_End": 2284.6600000000003,
      "Text": " are broken out here."
    },
    {
      "Time_Start": 2284.6600000000003,
      "Time_End": 2291.34,
      "Text": " So we have on-prem objects, and then we also have Azure objects listed out down here."
    },
    {
      "Time_Start": 2291.34,
      "Time_End": 2293.0,
      "Text": " This has gotten a refresh down here as well."
    },
    {
      "Time_Start": 2293.0,
      "Time_End": 2295.7400000000002,
      "Text": " So refresh DB stats, warm up the database."
    },
    {
      "Time_Start": 2295.7400000000002,
      "Time_End": 2296.92,
      "Text": " These all function the same way."
    },
    {
      "Time_Start": 2297.52,
      "Time_End": 2299.92,
      "Text": " They've just been given a facelift here at the bottom."
    },
    {
      "Time_Start": 2299.92,
      "Time_End": 2302.4,
      "Text": " So let's take a look at an example attack path."
    },
    {
      "Time_Start": 2302.4,
      "Time_End": 2306.6800000000003,
      "Text": " And this is based on attack paths that we've seen in more than one tenant in doing the"
    },
    {
      "Time_Start": 2306.6800000000003,
      "Time_End": 2310.08,
      "Text": " development of Azure Hound and Bloodhound 4.0."
    },
    {
      "Time_Start": 2310.08,
      "Time_End": 2312.76,
      "Text": " And this attack path goes like this."
    },
    {
      "Time_Start": 2312.76,
      "Time_End": 2317.4,
      "Text": " So against our default directory, we've got several attack paths branching out."
    },
    {
      "Time_Start": 2317.4,
      "Time_End": 2320.6800000000003,
      "Text": " But the one in particular that we're going to look at is this one here."
    },
    {
      "Time_Start": 2320.68,
      "Time_End": 2326.6,
      "Text": " So our Atlas app owner user owns this app."
    },
    {
      "Time_Start": 2326.6,
      "Time_End": 2331.72,
      "Text": " And this app is conveniently called this app has PRA role."
    },
    {
      "Time_Start": 2331.72,
      "Time_End": 2338.3999999999996,
      "Text": " This app runs as a service principle or authenticates to the tenant as this service principle."
    },
    {
      "Time_Start": 2338.3999999999996,
      "Time_End": 2345.72,
      "Text": " And this service principle has the privileged role admin role against the tenant."
    },
    {
      "Time_Start": 2345.72,
      "Time_End": 2350.02,
      "Text": " So to execute this attack path, there are four pieces of information that we need."
    },
    {
      "Time_Start": 2350.02,
      "Time_End": 2353.6,
      "Text": " We need the object ID of the app."
    },
    {
      "Time_Start": 2353.6,
      "Time_End": 2357.72,
      "Text": " We need the object ID of the service principle."
    },
    {
      "Time_Start": 2357.72,
      "Time_End": 2361.46,
      "Text": " We need the ID of the tenant."
    },
    {
      "Time_Start": 2361.46,
      "Time_End": 2367.18,
      "Text": " And we need the object ID of the user that we're going to promote to global admin."
    },
    {
      "Time_Start": 2367.18,
      "Time_End": 2370.14,
      "Text": " So we have all that information right here in the Bloodhound GUI."
    },
    {
      "Time_Start": 2370.14,
      "Time_End": 2373.8,
      "Text": " So the first piece that we need is the object ID for the app."
    },
    {
      "Time_Start": 2373.8,
      "Time_End": 2379.2599999999998,
      "Text": " So if we click on the app, we've got the object ID right there."
    },
    {
      "Time_Start": 2379.26,
      "Time_End": 2384.1800000000003,
      "Text": " The second piece of information that we need is the ID of the service principle."
    },
    {
      "Time_Start": 2384.1800000000003,
      "Time_End": 2385.1800000000003,
      "Text": " Same thing."
    },
    {
      "Time_Start": 2385.1800000000003,
      "Time_End": 2386.1800000000003,
      "Text": " Click here."
    },
    {
      "Time_Start": 2386.1800000000003,
      "Time_End": 2389.5800000000004,
      "Text": " There's the object ID right there."
    },
    {
      "Time_Start": 2389.5800000000004,
      "Time_End": 2392.5400000000004,
      "Text": " The third thing we need is the ID of the tenant."
    },
    {
      "Time_Start": 2392.5400000000004,
      "Time_End": 2394.34,
      "Text": " So we'll click on a tenant."
    },
    {
      "Time_Start": 2394.34,
      "Time_End": 2397.5,
      "Text": " There's the ID right there."
    },
    {
      "Time_Start": 2397.5,
      "Time_End": 2402.34,
      "Text": " And the last thing that we need is the object ID of the principle that we're going to promote"
    },
    {
      "Time_Start": 2402.34,
      "Time_End": 2404.0600000000004,
      "Text": " to global admin."
    },
    {
      "Time_Start": 2404.0600000000004,
      "Time_End": 2406.6200000000003,
      "Text": " So we're just going to use Alice app owner."
    },
    {
      "Time_Start": 2406.62,
      "Time_End": 2410.94,
      "Text": " In the example here, we're just going to have Alice promote herself to global admin."
    },
    {
      "Time_Start": 2410.94,
      "Time_End": 2415.18,
      "Text": " So we click on Alice, and we have Alice's object ID right there."
    },
    {
      "Time_Start": 2415.18,
      "Time_End": 2416.18,
      "Text": " All right."
    },
    {
      "Time_Start": 2416.18,
      "Time_End": 2418.8399999999997,
      "Text": " So we've got those four pieces of information."
    },
    {
      "Time_Start": 2418.8399999999997,
      "Time_End": 2424.7,
      "Text": " And so what we're going to do is we're going to plug them in as variables here at the start"
    },
    {
      "Time_Start": 2424.7,
      "Time_End": 2429.2599999999998,
      "Text": " of our kind of attack path execution script, so to say."
    },
    {
      "Time_Start": 2429.2599999999998,
      "Time_End": 2435.02,
      "Text": " So we have the app object ID, the service principle ID, the tenant ID, and Alice's"
    },
    {
      "Time_Start": 2435.02,
      "Time_End": 2436.02,
      "Text": " ID."
    },
    {
      "Time_Start": 2436.42,
      "Time_End": 2440.94,
      "Text": " And Alice is who we're going to be promoting to global admin."
    },
    {
      "Time_Start": 2440.94,
      "Time_End": 2444.38,
      "Text": " So if we go over to my test tenant and we look at the global admin assignments, we can"
    },
    {
      "Time_Start": 2444.38,
      "Time_End": 2447.86,
      "Text": " see that Alice is not listed here."
    },
    {
      "Time_Start": 2447.86,
      "Time_End": 2451.42,
      "Text": " On the second page, she's not listed here either."
    },
    {
      "Time_Start": 2451.42,
      "Time_End": 2457.94,
      "Text": " She's also not eligible for the global admin role assignment either."
    },
    {
      "Time_Start": 2457.94,
      "Time_End": 2458.94,
      "Text": " So we're going to fix that."
    },
    {
      "Time_Start": 2458.94,
      "Time_End": 2461.66,
      "Text": " We're going to change that in our attack path here."
    },
    {
      "Time_Start": 2461.66,
      "Time_End": 2464.0,
      "Text": " So we have those four pieces of info."
    },
    {
      "Time_Start": 2464.0,
      "Time_End": 2470.36,
      "Text": " And so we're going to create those variables here in our PowerShell window."
    },
    {
      "Time_Start": 2470.36,
      "Time_End": 2476.96,
      "Text": " Then we're going to connect to our tenant as the AliceAppOwner user."
    },
    {
      "Time_Start": 2476.96,
      "Time_End": 2483.64,
      "Text": " So AliceAppOwner at FabrikamFinance.com."
    },
    {
      "Time_Start": 2483.64,
      "Time_End": 2485.56,
      "Text": " My super secret password."
    },
    {
      "Time_Start": 2485.56,
      "Time_End": 2486.96,
      "Text": " And then we're going to skip this step right here."
    },
    {
      "Time_Start": 2486.96,
      "Time_End": 2491.08,
      "Text": " We're not going to give a phone number."
    },
    {
      "Time_Start": 2491.08,
      "Time_End": 2494.84,
      "Text": " Then we're going to get our service principle."
    },
    {
      "Time_Start": 2494.84,
      "Time_End": 2500.04,
      "Text": " We're going to assign that to the SP variable."
    },
    {
      "Time_Start": 2500.04,
      "Time_End": 2507.84,
      "Text": " And then the app ID is what we're going to use later for creating our new certificate."
    },
    {
      "Time_Start": 2507.84,
      "Time_End": 2511.52,
      "Text": " And then for authenticating to the tenant."
    },
    {
      "Time_Start": 2511.52,
      "Time_End": 2515.36,
      "Text": " So we need to create a new key credential for our app."
    },
    {
      "Time_Start": 2515.36,
      "Time_End": 2518.88,
      "Text": " I'm not going to step through what all of this is doing."
    },
    {
      "Time_Start": 2518.88,
      "Time_End": 2525.28,
      "Text": " But the end result is that we get a local thumbprint file that we can use to authenticate"
    },
    {
      "Time_Start": 2525.28,
      "Time_End": 2529.46,
      "Text": " against the service principle in the tenant."
    },
    {
      "Time_Start": 2529.46,
      "Time_End": 2531.44,
      "Text": " So we'll just copy and paste all of this."
    },
    {
      "Time_Start": 2531.44,
      "Time_End": 2536.1600000000003,
      "Text": " And we'll put more detail on what all this means in the blog post that's associated with"
    },
    {
      "Time_Start": 2536.1600000000003,
      "Time_End": 2538.4,
      "Text": " this talk."
    },
    {
      "Time_Start": 2538.4,
      "Time_End": 2540.38,
      "Text": " Okay."
    },
    {
      "Time_Start": 2540.38,
      "Time_End": 2543.2000000000003,
      "Text": " So that's created."
    },
    {
      "Time_Start": 2543.2000000000003,
      "Time_End": 2549.84,
      "Text": " Now our next step is to authenticate to the tenant as our service principle."
    },
    {
      "Time_Start": 2549.84,
      "Time_End": 2553.6000000000004,
      "Text": " And recall that that service principle is what actually has the PRA role."
    },
    {
      "Time_Start": 2553.6000000000004,
      "Time_End": 2560.4800000000005,
      "Text": " So this is the identity that we're actually authenticating as right now."
    },
    {
      "Time_Start": 2560.4800000000005,
      "Time_End": 2561.4800000000005,
      "Text": " So we'll do that."
    },
    {
      "Time_Start": 2561.4800000000005,
      "Time_End": 2562.4800000000005,
      "Text": " That's done."
    },
    {
      "Time_Start": 2562.4800000000005,
      "Time_End": 2565.34,
      "Text": " Now we're authenticated to the tenant as the service principle."
    },
    {
      "Time_Start": 2565.34,
      "Time_End": 2570.8,
      "Text": " And so the last step is we're going to promote AliceAppOwner to the global admin role."
    },
    {
      "Time_Start": 2570.8,
      "Time_End": 2575.52,
      "Text": " This is the role ID for the global admin."
    },
    {
      "Time_Start": 2575.52,
      "Time_End": 2581.96,
      "Text": " Or if you look in some documentation, it has a legacy name of company administrator."
    },
    {
      "Time_Start": 2581.96,
      "Time_End": 2583.96,
      "Text": " And then ref object ID here."
    },
    {
      "Time_Start": 2583.96,
      "Time_End": 2584.96,
      "Text": " This is Alice's ID."
    },
    {
      "Time_Start": 2584.96,
      "Time_End": 2587.32,
      "Text": " So that's her object ID from there."
    },
    {
      "Time_Start": 2587.32,
      "Time_End": 2593.96,
      "Text": " So we will run this."
    },
    {
      "Time_Start": 2593.96,
      "Time_End": 2595.0800000000004,
      "Text": " And we're done."
    },
    {
      "Time_Start": 2595.08,
      "Time_End": 2601.7599999999998,
      "Text": " So let's go back into our tenant and refresh here."
    },
    {
      "Time_Start": 2601.7599999999998,
      "Time_End": 2608.2,
      "Text": " And we can see that AliceAppOwner now has the global admin role assigned to her."
    },
    {
      "Time_Start": 2608.2,
      "Time_End": 2610.56,
      "Text": " All right."
    },
    {
      "Time_Start": 2610.56,
      "Time_End": 2611.56,
      "Text": " And that's it."
    },
    {
      "Time_Start": 2611.56,
      "Time_End": 2612.56,
      "Text": " Thank you very much for watching."
    },
    {
      "Time_Start": 2612.56,
      "Time_End": 2614.98,
      "Text": " I do want to give a couple shoutouts."
    },
    {
      "Time_Start": 2614.98,
      "Time_End": 2621.24,
      "Text": " First of all, on the Bloodhound 4.0 redesign, that work was done by Liz Duong."
    },
    {
      "Time_Start": 2621.24,
      "Time_End": 2623.84,
      "Text": " So you can check out her work at this link here."
    },
    {
      "Time_Start": 2623.84,
      "Time_End": 2629.6400000000003,
      "Text": " And then we do have an Azure Hound contributor on top of myself, Rohan, and Ryan Hausknecht."
    },
    {
      "Time_Start": 2629.6400000000003,
      "Time_End": 2630.6400000000003,
      "Text": " And that's Ryan Preston."
    },
    {
      "Time_Start": 2630.6400000000003,
      "Time_End": 2634.1600000000003,
      "Text": " So thank you, Ryan, very much for the contributions on Azure Hound."
    },
    {
      "Time_Start": 2634.1600000000003,
      "Time_End": 2640.3,
      "Text": " I also want to say thank you to the Bloodhound 4.0 beta testers in the secret beta channel"
    },
    {
      "Time_Start": 2640.3,
      "Time_End": 2641.3,
      "Text": " in the Bloodhound Slack."
    },
    {
      "Time_Start": 2641.3,
      "Time_End": 2645.1600000000003,
      "Text": " So thank you for doing the beta testing, for giving us feedback, and for helping us find"
    },
    {
      "Time_Start": 2645.1600000000003,
      "Time_End": 2646.48,
      "Text": " bugs."
    },
    {
      "Time_Start": 2646.48,
      "Time_End": 2647.48,
      "Text": " And that's it."
    },
    {
      "Time_Start": 2647.48,
      "Time_End": 2652.04,
      "Text": " So you can get Bloodhound at this link, bit.ly slash getbloodhound."
    },
    {
      "Time_Start": 2652.04,
      "Time_End": 2655.84,
      "Text": " And if you're not already in the Bloodhound Slack, you can do a self-serve invite thing"
    },
    {
      "Time_Start": 2655.84,
      "Time_End": 2659.04,
      "Text": " at the bit.ly slash Bloodhound Slack URL."
    },
    {
      "Time_Start": 2659.04,
      "Time_End": 2662.04,
      "Text": " Thank you very much, and enjoy the next talk."
    }
  ]
}